# Техническое задание
## Разработка системы морфологического анализа текста с хранением в префиксном дереве

### 1. Назначение и цели проекта

**Назначение:**  
Разработка программной системы для морфологического анализа текста на русском языке с решением проблемы омонимии и хранением результатов в префиксном дереве, используя в качестве ключей последовательности слогов.

**Цели проекта:**
1. Реализовать корректную обработку и представление текстовых данных
2. Выполнить морфологический анализ с учетом снятия омонимии
3. Разработать алгоритм разделения русских слов на слоги
4. Организовать хранение результатов в эффективной структуре данных (префиксное дерево)
5. Визуализировать полученные результаты
6. Создать хорошо документированный и оптимизированный код

### 2. Требования к проекту

#### 2.1 Функциональные требования

**2.1.1 Обработка входных данных**
- Система должна корректно считывать текст из файла в формате TXT
- Система должна выполнять предварительную очистку и нормализацию текста (удаление лишних пробелов, приведение к нижнему регистру и т.д.)
- Система должна токенизировать текст (разбивать на отдельные слова)

**2.1.2 Морфологический анализ**
- Система должна определять для каждого слова его морфологические характеристики (часть речи, род, число, падеж и т.д.)
- Система должна обрабатывать случаи омонимии, выбирая наиболее вероятный вариант грамматической формы на основе контекста
- Система должна корректно обрабатывать знаки препинания и другие небуквенные символы

**2.1.3 Разделение слов на слоги**
- Система должна реализовывать алгоритм деления русских слов на слоги
- Алгоритм должен учитывать основные правила слогоделения в русском языке

**2.1.4 Префиксное дерево**
- Система должна реализовывать структуру данных "префиксное дерево" (trie)
- Ключами в дереве должны быть последовательности слогов
- В узлах дерева должна храниться информация о морфологических характеристиках соответствующих слов

**2.1.5 Визуализация результатов**
- Система должна предоставлять визуальное представление префиксного дерева
- Система должна генерировать статистику по частям речи и другим морфологическим характеристикам
- Система должна предоставлять возможность просмотра результатов анализа

#### 2.2 Нефункциональные требования

**2.2.1 Производительность**
- Система должна обрабатывать тексты объемом до 100 000 слов за приемлемое время (не более 5 минут)
- Использование памяти не должно превышать 1 ГБ для текстов указанного объема

**2.2.2 Надежность**
- Система должна корректно обрабатывать исключительные ситуации (некорректный ввод, отсутствие файла и т.д.)
- Система должна сохранять промежуточные результаты для возможности восстановления в случае сбоя

**2.2.3 Расширяемость**
- Архитектура системы должна позволять легко добавлять новые алгоритмы анализа и визуализации
- Должна быть предусмотрена возможность обработки текстов на других языках (в перспективе)

**2.2.4 Удобство использования**
- Система должна иметь понятный интерфейс для запуска анализа и просмотра результатов
- Необходимо предоставить подробную документацию по использованию системы

### 3. Критерии приемки и оценки

#### 3.1 Критерии приемки (по задаче)

**3.1.1 Корректность представления входных данных в памяти (2 балла)**
- Тексты корректно считываются и нормализуются
- Структуры данных для хранения исходного текста выбраны и реализованы оптимально
- Обработка специальных символов и форматирования выполняется без ошибок

**3.1.2 Корректность алгоритма обработки данных (2 балла)**
- Морфологический анализ выполняется без ошибок для большинства слов
- Алгоритм снятия омонимии работает корректно в типичных случаях
- Разделение слов на слоги соответствует основным правилам русского языка
- Префиксное дерево строится правильно и позволяет эффективный доступ к данным

**3.1.3 Визуализация результатов (2 балла)**
- Визуальное представление префиксного дерева понятно и информативно
- Статистические данные представлены наглядно
- Пользователь может взаимодействовать с визуализацией для получения дополнительной информации

**3.1.4 Использование готовых библиотек (2 балла)**
- Использованы специализированные библиотеки для морфологического анализа (pymorphy2 или аналогичные)
- Для визуализации применены подходящие инструменты (matplotlib, networkx, graphviz или другие)
- Для реализации алгоритмов и структур данных использованы стандартные библиотеки, где это целесообразно

**3.1.5 Оформление кода (1 балл)**
- Код соответствует стилю PEP 8
- Присутствуют содержательные комментарии
- Функции и переменные имеют понятные и описательные имена
- Все функции и классы имеют докстринги
- Используется типизация (type hints)

**3.1.6 Отсутствие алгоритмической криворукости (1 балл)**
- Нет дублирования кода
- Алгоритмы реализованы оптимально с точки зрения времени и памяти
- Нет ненужной реализации функций, уже существующих в стандартной библиотеке или используемых пакетах

### 4. Правила ведения кода

#### 4.1 Стиль кодирования

- Следовать стилю PEP 8 для Python
- Использовать 4 пробела для отступов (не табуляцию)
- Ограничить длину строки 79 символами
- Добавлять пустые строки для логического разделения кода
- Использовать одинарные кавычки для строк, двойные - при необходимости использования одинарных кавычек внутри строки
- Называть переменные и функции в стиле snake_case
- Называть классы в стиле CamelCase
- Константы записывать ПРОПИСНЫМИ_БУКВАМИ
- Избегать однобуквенных имен переменных (за исключением итераторов в небольших циклах)

#### 4.2 Документация кода

- Каждый модуль должен начинаться с докстринга, описывающего его назначение
- Каждая функция и метод должны иметь докстринг, описывающий:
  - Что делает функция
  - Параметры (с указанием типов)
  - Возвращаемое значение
  - Возможные исключения
- Использовать типизацию для всех функций и методов
- Сложные алгоритмы должны сопровождаться комментариями, объясняющими логику работы

#### 4.3 Структура проекта

- Код должен быть организован в модули по логическим компонентам:
  - Модуль для чтения и предобработки текста
  - Модуль для морфологического анализа
  - Модуль для разделения слов на слоги
  - Модуль для реализации префиксного дерева
  - Модуль для визуализации
  - Главный модуль, объединяющий все компоненты
- Файлы должны иметь понятные имена, отражающие их содержание
- В корне проекта должен быть README.md с описанием проекта и инструкциями по запуску

#### 4.4 Тестирование

- Код должен включать модульные тесты для ключевых функций
- Тесты должны проверять как типичные, так и граничные случаи
- Рекомендуется использовать библиотеку pytest для написания тестов

### 5. Верификация полученных результатов

#### 5.1 Проверка морфологического анализа

- Случайным образом выбрать 100 слов из исходного текста
- Сравнить результаты автоматического анализа с ручной разметкой
- Точность должна быть не менее 90%

#### 5.2 Проверка разделения на слоги

- Случайным образом выбрать 50 слов
- Сравнить результаты автоматического разделения с правилами русского языка
- Точность должна быть не менее 85%

#### 5.3 Проверка префиксного дерева

- Убедиться, что все слова из исходного текста могут быть найдены в дереве
- Проверить, что слова с одинаковыми начальными слогами имеют общие пути в дереве
- Проверить соответствие морфологической информации в узлах дерева результатам анализа

#### 5.4 Оценка производительности

- Измерить время обработки текста различного объема
- Измерить использование памяти
- Результаты должны соответствовать указанным нефункциональным требованиям

### 6. Пояснение полученных результатов

По завершении проекта должен быть подготовлен отчет, содержащий:

1. Описание реализованных алгоритмов и структур данных
2. Статистика по морфологическому составу текста:
   - Распределение по частям речи
   - Наиболее частые словоформы
   - Распределение слогов
3. Анализ структуры построенного префиксного дерева:
   - Глубина дерева
   - Распределение узлов по уровням
   - Наиболее частые пути в дереве
4. Выводы о применимости и эффективности выбранных методов и инструментов
5. Предложения по дальнейшему развитию системы

### 7. Технологии и инструменты

Рекомендуемые технологии и библиотеки:

1. **Язык программирования:** Python 3.8+
2. **Морфологический анализ:** pymorphy2 или Natasha (Slovnet)
3. **Обработка текста:** NLTK, re
4. **Визуализация:** matplotlib, networkx, graphviz, pyvis (для интерактивной HTML-визуализации)
5. **Тестирование:** unittest
6. **Линтеры и форматтеры:** flake8, black, mypy
7. **Другие полезные библиотеки:** tqdm (для индикации прогресса), pandas (для анализа данных)

### 7. Дополнительные требования на основе новых исследований

#### 7.1 Расширенный морфологический анализ

**7.1.1 Альтернативные подходы к морфологическому анализу**
- Система должна предоставлять возможность выбора между словарным подходом (pymorphy2) и нейросетевым (Natasha/Slovnet) для морфологического анализа
- Должна быть реализована возможность сравнения результатов разных подходов
- Необходимо документировать преимущества и недостатки каждого подхода в контексте конкретных текстов

**7.1.2 Улучшенные алгоритмы снятия омонимии**
- Система должна обеспечивать контекстно-зависимое снятие омонимии, учитывая окружающие слова
- При использовании словарного подхода (pymorphy2) должны быть реализованы дополнительные правила для снятия омонимии, основанные на контексте
- Должна быть предусмотрена оценка точности снятия омонимии для различных случаев

#### 7.2 Интерактивная визуализация

**7.2.1 HTML-визуализация префиксного дерева**
- Система должна поддерживать интерактивную визуализацию префиксного дерева в формате HTML
- Визуализация должна позволять масштабирование и перемещение по дереву
- При наведении на узлы должна отображаться дополнительная морфологическая информация
- Узлы, представляющие окончания слов, должны быть визуально выделены

**7.2.2 Расширенные возможности взаимодействия с визуализацией**
- Должна быть предусмотрена возможность фильтрации узлов по частям речи
- Должна быть реализована функция поиска конкретных слов в дереве
- Система должна поддерживать отображение статистики по выбранным узлам

#### 7.3 Расширенная аналитика и отчётность

**7.3.1 Детализированные отчёты**
- Система должна генерировать детальные отчёты в табличном формате (CSV, Excel)
- Отчёты должны включать полный морфологический разбор всех токенов текста
- Должны быть включены отдельные таблицы для анализа слогов, узлов дерева и связей между узлами

**7.3.2 Визуализация аналитических данных**
- Система должна предоставлять гистограммы распределения слов по частям речи
- Должны быть включены диаграммы распределения слов по количеству слогов
- Система должна генерировать тепловые карты частотности слогов и их комбинаций

#### 7.4 Компатибельность и интеграция

**7.4.1 Совместимость с различными версиями Python**
- Система должна корректно работать в средах Python 3.9 и 3.11
- Должны быть предусмотрены альтернативные реализации для случаев несовместимости библиотек

**7.4.2 Расширяемый интерфейс для интеграции**
- Система должна предоставлять API для интеграции с другими инструментами анализа текста
- Должна быть реализована возможность пакетной обработки файлов
- Система должна поддерживать экспорт результатов в стандартные форматы
